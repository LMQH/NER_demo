# 信息抽取模式说明文档

本文档详细说明 SiameseUIE 模型支持的三种主要信息抽取模式的逻辑差异、请求参数格式和使用场景。

---

## 目录

1. [命名实体识别（NER）](#1-命名实体识别ner)
2. [关系抽取（RE）](#2-关系抽取re)
3. [事件抽取（EE）](#3-事件抽取ee)
4. [模式对比总结](#4-模式对比总结)

---

## 1. 命名实体识别（NER）

### 1.1 逻辑说明

**定义**：从文本中识别并分类命名实体，每个实体类型独立识别，不建立实体之间的关系。

**核心特点**：
- 识别独立的实体片段
- 每个实体类型单独识别
- 不关注实体之间的关联关系
- 返回实体及其在文本中的位置

**适用场景**：
- 提取文本中的关键实体信息
- 构建实体字典或知识库
- 文档分类和标记
- 简单的信息检索

### 1.2 Schema 格式

```json
{
  "实体类型1": null,
  "实体类型2": null,
  "实体类型3": null
}
```

**格式规则**：
- 顶层键：实体类型名称（如：人物、地点、机构等）
- 值：固定为 `null`
- 所有实体类型平级，无嵌套关系

### 1.3 完整请求示例

**请求体**：
```json
{
  "text": "1944年毕业于北大的名古屋铁道会长谷口清太郎等人在日本积极筹资，共筹款2.7亿日元，参加捐款的日本企业有69家。",
  "model": "nlp_structbert_siamese-uie_chinese-base",
  "schema": {
    "人物": null,
    "地理位置": null,
    "组织机构": null,
    "时间": null
  }
}
```

**响应示例**：
```json
{
  "status": "success",
  "data": {
    "text": "1944年毕业于北大的名古屋铁道会长谷口清太郎等人在日本积极筹资...",
    "entities": {
      "output": [
        [
          {
            "type": "人物",
            "span": "谷口清太郎",
            "offset": [18, 23]
          }
        ],
        [
          {
            "type": "地理位置",
            "span": "日本",
            "offset": [26, 28]
          }
        ],
        [
          {
            "type": "组织机构",
            "span": "名古屋铁道",
            "offset": [13, 17]
          }
        ],
        [
          {
            "type": "时间",
            "span": "1944年",
            "offset": [0, 5]
          }
        ]
      ]
    }
  }
}
```

### 1.4 输出说明

- `output`：数组，每个元素是一个数组，包含同一类型的实体
- `type`：实体类型
- `span`：实体文本
- `offset`：实体在原文中的位置 `[起始位置, 结束位置]`

---

## 2. 关系抽取（RE）

### 2.1 逻辑说明

**定义**：从文本中抽取实体之间的语义关系，通常表示为三元组（主语-关系-宾语）。

**核心特点**：
- 以某个实体为中心，抽取其与其他实体的关系
- 关系是定向的（从主语到宾语）
- 一个实体可以同时拥有多个关系
- 返回实体及其关联的关系信息

**适用场景**：
- 构建知识图谱
- 挖掘实体间的关联关系
- 关系型知识库构建
- 语义理解和推理

### 2.2 Schema 格式

```json
{
  "主语实体类型": {
    "关系1(宾语实体类型)": null,
    "关系2(宾语实体类型)": null,
    "关系3(宾语实体类型)": null
  }
}
```

**格式规则**：
- 顶层键：主语实体类型（关系的主体）
- 值：嵌套对象，键为关系名称，格式为 `关系(宾语实体类型)`
- 关系名称后括号内指定宾语实体类型
- 嵌套结构表示"从主语实体出发的关系"

### 2.3 完整请求示例

**请求体**：
```json
{
  "text": "在北京冬奥会自由式滑雪中，2月8日上午，滑雪女子大跳台决赛中中国选手谷爱凌以188.25分获得金牌。2月9日上午，滑雪男子大跳台决赛中日本选手小泉次郎以188.25分获得银牌！",
  "model": "nlp_structbert_siamese-uie_chinese-base",
  "schema": {
    "人物": {
      "比赛项目(赛事名称)": null,
      "参赛地点(城市)": null,
      "获奖时间(时间)": null,
      "选手国籍(国籍)": null
    }
  }
}
```

**响应示例**：
```json
{
  "status": "success",
  "data": {
    "text": "在北京冬奥会自由式滑雪中...",
    "entities": {
      "output": [
        [
          {
            "type": "人物",
            "span": "谷爱凌",
            "offset": [17, 20]
          },
          {
            "type": "比赛项目(赛事名称)",
            "span": "滑雪女子大跳台",
            "offset": [10, 16]
          },
          {
            "type": "参赛地点(城市)",
            "span": "北京",
            "offset": [1, 3]
          },
          {
            "type": "获奖时间(时间)",
            "span": "2月8日上午",
            "offset": [5, 10]
          }
        ],
        [
          {
            "type": "人物",
            "span": "小泉次郎",
            "offset": [28, 32]
          },
          {
            "type": "比赛项目(赛事名称)",
            "span": "滑雪男子大跳台",
            "offset": [21, 27]
          },
          {
            "type": "参赛地点(城市)",
            "span": "北京",
            "offset": [1, 3]
          },
          {
            "type": "获奖时间(时间)",
            "span": "2月9日上午",
            "offset": [18, 23]
          }
        ]
      ]
    }
  }
}
```

### 2.4 输出说明

- `output`：数组，每个元素是一个数组，包含一个关系三元组
- 第一个元素：主语实体（如"人物"）
- 后续元素：与该主语相关的宾语实体（关系对象）
- 所有元素组成一个完整的关系三元组

**关系三元组示例**：
- 谷爱凌 → 比赛项目 → 滑雪女子大跳台
- 谷爱凌 → 参赛地点 → 北京
- 谷爱凌 → 获奖时间 → 2月8日上午

---

## 3. 事件抽取（EE）

### 3.1 逻辑说明

**定义**：从文本中识别事件触发词，并抽取事件的各个参数（如时间、地点、参与者等）。

**核心特点**：
- 以事件类型（触发词）为中心
- 事件参数是事件的属性，不是独立的实体
- 一个事件包含多个参数
- 返回事件及其完整的参数信息

**适用场景**：
- 事件监控和分析
- 新闻事件提取
- 日志分析和处理
- 结构化事件记录

### 3.2 Schema 格式

```json
{
  "事件类型(事件触发词)": {
    "参数类型1": null,
    "参数类型2": null,
    "参数类型3": null
  }
}
```

**格式规则**：
- 顶层键：事件类型，格式为 `事件类型(事件触发词)`
- 事件触发词用括号标注，通常是动词
- 值：嵌套对象，键为事件参数类型
- 参数类型通常是：时间、地点、参与者、结果等

### 3.3 完整请求示例

**请求体**：
```json
{
  "text": "7月28日，天津泰达在德比战中以0-1负于天津天海。",
  "model": "nlp_structbert_siamese-uie_chinese-base",
  "schema": {
    "胜负(事件触发词)": {
      "时间": null,
      "败者": null,
      "胜者": null,
      "赛事名称": null
    }
  }
}
```

**响应示例**：
```json
{
  "status": "success",
  "data": {
    "text": "7月28日，天津泰达在德比战中以0-1负于天津天海。",
    "entities": {
      "output": [
        [
          {
            "type": "胜负(事件触发词)",
            "span": "负于",
            "offset": [15, 17]
          },
          {
            "type": "时间",
            "span": "7月28日",
            "offset": [0, 5]
          },
          {
            "type": "败者",
            "span": "天津泰达",
            "offset": [6, 10]
          },
          {
            "type": "胜者",
            "span": "天津天海",
            "offset": [18, 22]
          },
          {
            "type": "赛事名称",
            "span": "德比战",
            "offset": [11, 14]
          }
        ]
      ]
    }
  }
}
```

### 3.4 输出说明

- `output`：数组，每个元素是一个数组，包含一个完整的事件
- 第一个元素：事件触发词（如"胜负(事件触发词)"）
- 后续元素：事件的各个参数
- 所有元素组成一个完整的事件记录

**事件记录示例**：
- 事件类型：胜负（触发词：负于）
- 时间：7月28日
- 败者：天津泰达
- 胜者：天津天海
- 赛事名称：德比战

---

## 4. 模式对比总结

### 4.1 Schema 格式对比

| 模式 | Schema 结构 | 顶层键含义 | 值类型 | 嵌套层级 |
|------|------------|-----------|--------|----------|
| **NER** | 平铺结构 | 实体类型 | `null` | 1层 |
| **RE** | 嵌套结构 | 主语实体类型 | 关系对象 | 2层 |
| **EE** | 嵌套结构 | 事件类型(触发词) | 参数对象 | 2层 |

### 4.2 逻辑差异对比

| 特性 | NER | RE | EE |
|------|-----|-----|-----|
| **识别对象** | 独立实体 | 实体+关系 | 事件+参数 |
| **关联性** | 无关联 | 二元关系 | 多元关系 |
| **输出结构** | 实体列表 | 关系三元组 | 事件记录 |
| **中心概念** | 实体类型 | 主语实体 | 事件触发词 |

### 4.3 使用场景对比

| 场景 | NER | RE | EE |
|------|-----|-----|-----|
| **知识库构建** | ✅ 实体字典 | ✅ 知识图谱 | ✅ 事件库 |
| **文本标注** | ✅ 实体标记 | ❌ | ❌ |
| **关系挖掘** | ❌ | ✅ 关系发现 | ✅ 事件关联 |
| **信息检索** | ✅ 实体搜索 | ✅ 关系查询 | ✅ 事件查询 |
| **语义理解** | ⚠️ 基础 | ✅ 深层 | ✅ 完整 |

### 4.4 常见错误

#### ❌ 错误示例 1：关系抽取使用了平铺格式

```json
// 错误：这是NER格式，不会建立关系
{
  "人物": null,
  "比赛项目(赛事名称)": null,
  "参赛地点(城市)": null
}
```

```json
// 正确：使用嵌套格式
{
  "人物": {
    "比赛项目(赛事名称)": null,
    "参赛地点(城市)": null
  }
}
```

#### ❌ 错误示例 2：事件抽取缺少触发词

```json
// 错误：缺少事件触发词
{
  "胜负": {
    "时间": null,
    "败者": null
  }
}
```

```json
// 正确：包含事件触发词
{
  "胜负(事件触发词)": {
    "时间": null,
    "败者": null
  }
}
```

### 4.5 选择建议

- **选择 NER**：只需识别文本中的关键实体，不需要关系信息
- **选择 RE**：需要了解实体之间的关联关系，构建知识图谱
- **选择 EE**：需要提取完整的事件信息，包括时间、地点、参与者等

---

## 5. 额外说明

### 5.1 Offset 字段说明

所有模式返回的实体都包含 `offset` 字段：
- **格式**：`[起始位置, 结束位置]`
- **含义**：实体在原文中的字符位置索引（从0开始）
- **用途**：定位实体、高亮显示、文本提取

**示例**：
```json
{
  "type": "人物",
  "span": "谷爱凌",
  "offset": [17, 20]  // 表示原文中第17-19个字符（不包含20）
}
```

### 5.2 组合使用

可以在一次请求中组合使用多种模式（通过在schema中同时包含NER和RE格式），但推荐针对具体任务选择最合适的单一模式。

---

## 6. 参考资源

- 模型官方文档：`model/nlp_structbert_siamese-uie_chinese-base/README.md`
- API 文档：http://localhost:8000/docs
- 项目 README：`README.md`

---

**最后更新**：2025-12-21

